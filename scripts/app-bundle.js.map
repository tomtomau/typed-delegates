{"version":3,"sources":["define-event.ts","event-function.ts","index.ts","typed-delegates-custom-attribute.ts","app.ts","app.html","environment.ts","greeter.ts","greeter.html","main.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { DOM } from 'aurelia-framework';\nimport {EventFunction} from \"./event-function\";\n\ndeclare type EventHandler<T> = (event: CustomEvent<T>) => unknown;\nexport type EventFunctionCollection = Array<EventFunction<unknown>>;\n\nfunction subscriber<T>(eventType: string): (callback: EventHandler<T>) => EventFunction<T> {\n    return (callback) => {\n        return new EventFunction<T>(eventType, callback);\n    };\n}\n\nfunction creator<T>(eventType: string): ((detail: T, bubbles: boolean) => CustomEvent<T>) {\n    return (detail: T, bubbles = true) => {\n        return DOM.createCustomEvent(eventType, { bubbles, detail });\n    };\n}\n\nexport interface EventDefinition<T> {\n    readonly type: string;\n    readonly subscribe: (callback: EventHandler<T>) => EventFunction<T>;\n    readonly create: (detail: T, bubbles?: boolean) => CustomEvent<T>;\n}\n\nexport function defineEvent<T>(eventType: string): EventDefinition<T> {\n    return {\n        type: eventType,\n        subscribe: subscriber<T>(eventType),\n        create: creator<T>(eventType),\n    };\n}\n","export class EventFunction<T> {\n    constructor(private eventType: string, private callback: (event?: CustomEvent<T>) => void) {\n    }\n\n    public getEventType(): string {\n        return this.eventType;\n    }\n\n    public execute(event: CustomEvent<T>): void {\n        this.callback(event);\n    }\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\nimport {PLATFORM} from 'aurelia-pal';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources([\n    PLATFORM.moduleName('./typed-delegates-custom-attribute')\n  ]);\n}\n\nexport * from './event-function';\nexport * from './define-event';\n","import {delegationStrategy, EventManager, inject} from 'aurelia-framework';\nimport {EventFunction} from './event-function';\n\n@inject(Element, EventManager)\nexport class TypedDelegatesCustomAttribute {\n    constructor(private element: Element, private eventManager: EventManager) {\n    }\n\n    public valueChanged(newValue: Array<EventFunction<any>>): void {\n        for (const eventFunction of newValue) {\n            this.eventManager.addEventListener(this.element, eventFunction.getEventType(), (e: CustomEvent<any>) => {\n                eventFunction.execute(e);\n            }, delegationStrategy.bubbling);\n        }\n    }\n}\n","import {EventFunctionCollection} from \"../src\";\nimport {GreetEvent} from \"./greeter\";\n\nexport class App {\n  public message: string = 'from Aurelia!';\n  public greeterDelegates: EventFunctionCollection;\n  public greetings: string[] = [];\n\n  constructor() {\n    this.greeterDelegates = [\n        GreetEvent.subscribe((event) => this.greetings.push(event.detail.text)),\n    ];\n  }\n}\n","<template>\n    <require from=\"./greeter\"></require>\n\n    <p>Greetings:</p>\n\n    <ul>\n        <li repeat.for=\"greeting of greetings\">${greeting}</li>\n    </ul>\n\n    <greeter typed-delegates.bind=\"greeterDelegates\"></greeter>\n</template>\n","export default {\n  debug: true,\n  testing: true\n};\n","import {defineEvent} from 'typed-delegates';\nimport {inject} from 'aurelia-framework';\n\nexport const GreetEvent = defineEvent<{ text: string }>('greet');\n\n@inject(Element)\nexport class Greeter {\n    public text = '';\n\n    constructor(private readonly element: HTMLElement) {\n    }\n\n    public greet() {\n        this.element.dispatchEvent(GreetEvent.create({ text: this.text }));\n        this.text = '';\n    }\n}\n","<template>\n    <label for=\"greetText\">Greet text:</label>\n\n    <input id=\"greetText\" type=\"text\" value.bind=\"text\">\n\n    <button click.delegate=\"greet()\">Greet</button>\n</template>\n","import 'core-js/stable';\nimport {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    // load the plugin ../src\n    // The \"resources\" is mapped to \"../src\" in aurelia.json \"paths\"\n    .feature('typed-delegates');\n\n  aurelia.use.developmentLogging(environment.debug ? 'debug' : 'warn');\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n"],"sourceRoot":".."}